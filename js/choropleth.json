{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1100,
  "height": 740,
  "projection": {"type": "mercator"},
  "title": {"text": "Choropleth â€“ Population by LGA"},
  "data": {
    "url": "js/VIC_shape_LGA.json",
    "format": {"type": "topojson", "feature": "LGA_POLYGON"}
  },
  "transform": [
    {
      "lookup": "properties.LGA_NAME",
      "from": {
        "data": {"url": "data/pop_count_LGA.csv"},
        "key": "LGA_NAME",
        "fields": ["total_station_count","population"]
      }
    },
    {"calculate": "toNumber(datum.total_station_count)", "as": "total_station_count_num"},
    {"calculate": "toNumber(datum.population)", "as": "population_num"}
  ],
  "mark": {"type": "geoshape", "stroke": "white", "strokeWidth": 0.8},
  "encoding": {
    "color": {
      "field": "population_num",
      "type": "quantitative",
      "scale": {"scheme": "blues"},
      "title": "Population"
    },
    "tooltip": [
      {"field": "properties.LGA_NAME", "title": "LGA"},
      {"field": "total_station_count_num", "title": "Total Stations"},
      {"field": "population_num", "title": "Population"}
    ]
  },
  "config": {"view": {"stroke": null}, "background": "white"}
}
